<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="robots" content="noindex" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <script>
        // Customize Your Clipalette Paste Board Here!
        const buttonMap = {
            "Emoji": [
                ["ğŸ˜‚", "ğŸ¤£", "ğŸ˜…", "ğŸ˜†", "ğŸ˜", "ğŸ˜", "ğŸ˜ª", "ğŸ˜‰", "ğŸ¤”", "ğŸ¤·â€â™€ï¸", "ğŸ¤¦â€â™€ï¸", "ğŸ‘Œ", "ğŸ––", "ğŸ¤Ÿ", "ğŸ’®",
                    "ğŸ’¢", "ğŸœ", "ğŸ­"],
                ["ï¼ˆãƒ»Ï‰<ï¼‰ã¦ã¸ãºã‚", "ãƒ¾(â‰§âˆ‡â‰¦*)ã‚ãŠã¯ã‚ˆã‚“ã‚ˆã‚“â™ª", "(*Â´ï½¥Ğ´ï½¥)ï¾‰â˜†ï½ºï¾ï¾Šï¾ï¾ï¾Šâ˜†", "ï¼ˆãƒ»âˆ€ãƒ»ï¼‰âˆ©ï¼œã‚„ãï¼ï¼"],
            ], "Greek": [
                ["Î±", "Î²", "Î³", "Î´", "Ïµ", "Î¶", "Î·", "Î¸", "Î¹", "Îº", "Î»", "Î¼", "Î½", "Î¾", "Î¿", "Ï€", "Ï", "Ïƒ", "Ï„", "Ï…",
                    "Ï•", "Ï‡", "Ïˆ", "Ï‰"],
                ["Î‘", "Î’", "Î“", "Î”", "Î•", "Î–", "Î—", "Î˜", "Î™", "Îš", "Î›", "Îœ", "Î", "Î", "ÎŸ", "Î ", "Î¡", "Î£", "Î¤", "Î¥",
                    "Î¦", "Î§", "Î¨", "Î©"],
            ], "Math": [
                ["Îµ", "Ï‘", "Ï°", "Ï–", "Ï±", "Ï‚", "Ï†", "Ï’"],
                ["Ã—", "Ã·", "âˆš", "âˆ", "Ï€", "â‰ ", "â‰¤", "â‰¥", "â‰ƒ", "âˆ«", "âˆ‘", "âˆ", "âˆ‚", "âˆ‡", "âŠ•", "âŠ—", "âˆ§", "âˆ¨", "Â¬", "âŠ»",
                    "âŠ¼", "âŠ½"],
                ["â««", "âˆ…", "âˆˆ", "âˆ‹", "âˆ‰", "âˆŒ", "âŠ‚", "âŠƒ", "âŠ†", "âŠ‡", "âŠ„", "âŠ…", "â‹ƒ", "â‹‚", "âˆ€", "âˆƒ", "âˆ„", "âˆ", "âˆ´", "âˆµ"],
            ]
        }
    </script>

    <title>Clipalette</title>
    <meta name="description" content="Clipalette â€” A lightweight, customizable copy panel for quick access to frequently used text snippets." />
    <meta name="author" content="undecV" />
    <meta property="og:title" content="Clipalette" />
    <meta property="og:description" content="A lightweight, customizable copy panel for quick access to frequently used text snippets." />
    <meta property="og:type" content="website" />
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22>
        <text y=%22.9em%22 font-size=%2290%22>ğŸ“‹</text></svg>" />

    <style>
        :root,
        :root[data-theme="light"] {
            /* Color theme: Tomorrow */
            --foreground: #4d4d4c;
            --background: #ffffff;
            --selection: #d6d6d6;
            --line: #efefef;
            --comment: #8e908c;
            --red: #c82829;
            --orange: #f5871f;
            --yellow: #eab700;
            --green: #718c00;
            --aqua: #3e999f;
            --blue: #4271ae;
            --purple: #8959a8;
            --window: #efefef;
        }

        :root[data-theme="dark"] {
            /* Color theme: Tomorrow Night */
            --foreground: #c5c8c6;
            --background: #1d1f21;
            --selection: #373b41;
            --line: #282a2e;
            --comment: #969896;
            --red: #cc6666;
            --orange: #de935f;
            --yellow: #f0c674;
            --green: #b5bd68;
            --aqua: #8abeb7;
            --blue: #81a2be;
            --purple: #b294bb;
            --window: #4d5057;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                /* Color theme: Tomorrow Night */
                --foreground: #c5c8c6;
                --background: #1d1f21;
                --selection: #373b41;
                --line: #282a2e;
                --comment: #969896;
                --red: #cc6666;
                --orange: #de935f;
                --yellow: #f0c674;
                --green: #b5bd68;
                --aqua: #8abeb7;
                --blue: #81a2be;
                --purple: #b294bb;
                --window: #4d5057;
            }
        }

        @media (prefers-color-scheme: light) {
            :root {
                /* Color theme: Tomorrow */
                --foreground: #4d4d4c;
                --background: #ffffff;
                --selection: #d6d6d6;
                --line: #efefef;
                --comment: #8e908c;
                --red: #c82829;
                --orange: #f5871f;
                --yellow: #eab700;
                --green: #718c00;
                --aqua: #3e999f;
                --blue: #4271ae;
                --purple: #8959a8;
                --window: #efefef;
            }
        }

        :root {
            color-scheme: light dark;
            --radius: .5em;
            --sans-serif: system-ui, sans-serif;
            --monospace: monospace;
        }

        html,
        body {
            height: 100%;
            width: 100%;
            margin: 0;
        }

        body {
            background-color: var(--background);
            color: var(--foreground);
            font-family: var(--sans-serif);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        main {
            flex: 1;
            min-width: 60%;
            min-height: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 0;
            padding: 0;
        }

        footer {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: .2em;
            margin-bottom: .4em;
        }

        footer p {
            margin: 0;
            font-size: small;
            color: var(--comment);
        }

        hr {
            min-height: .15em;
            width: 100%;
            border: none;
            border-radius: var(--radius);
            color: var(--line);
            background-color: var(--line);
            margin: 1.8em 0;
        }

        .selection {
            display: inline-flex;
            padding: .4em;
            gap: .2em;
            border-radius: var(--radius);
            background-color: var(--line);
        }

        .selection .item {
            display: flex;
            border-radius: var(--radius);
        }

        .selection .item .text {
            font-family: var(--sans-serif);
            padding: .2em 1em;
            color: var(--foreground);
            border-radius: var(--radius);
        }

        .selection.is-icon .item .text {
            padding: .2em .4em;
        }

        .selection .item input {
            display: none;
        }

        .selection .item input:checked+.text {
            background-color: var(--selection);
        }

        button {
            color: var(--foreground);
            background-color: var(--line);
            border: none;
            border-radius: var(--radius);
            padding: .2em .2em;
            box-sizing: border-box;
        }

        button:hover {
            background-color: var(--selection);
        }

        button:focus {
            background-color: var(--selection);
            outline: .2em solid var(--blue);
        }

        .input-field {
            width: 80%;
            font-size: x-large;
            font-family: var(--sans-serif);
            display: flex;
            align-items: center;
            /* gap: .4em; */
            padding: 0;
            margin: 0;
            border: none;
            height: 1.8em;
        }

        .input-field * {
            height: 100%;
            margin: 0;
            border: none;
            box-sizing: border-box;
            border-radius: var(--radius);
        }

        .input-field input {
            flex: 1;
            width: 80%;
            font-size: inherit;
            text-align: center;
            color: var(--foreground);
            background-color: var(--selection);
            padding: .2em 1em;
        }

        .input-field input::placeholder {
            color: var(--comment);
            opacity: .6;
        }

        .input-field input:focus {
            outline: .2em solid var(--blue);
        }

        .input-field button {
            font-size: large;
            font-family: inherit;
            height: 100%;
            aspect-ratio: 1 / 1;
            padding: .2em .2em;
            margin-left: .4em;
            color: var(--foreground);
            background-color: var(--line);
        }

        .input-field button:hover {
            background-color: var(--selection);
        }

        .tabview {
            height: 60%;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.2em;
            min-height: 0;
        }

        .tabview-tab-panel-container {
            flex: 1;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-y: auto;
        }

        .tabview-tab-panel {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: .8em;
            padding: .4em;
            box-sizing: border-box;
        }

        .click-board-panel-row {
            max-width: 100%;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: .4em;
        }

        .is-hidden {
            display: none;
        }

        a {
            color: var(--blue);
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        a:visited {
            color: var(--purple);
        }
    </style>
</head>

<body>
    <main>
        <fieldset id="output-bar" class="input-field">
            <input id="click-board-output" placeholder="ğŸ“‹ CopyBoard" />
            <button id="click-board-copy-button" type="button">ğŸ“‹</button>
            <button id="click-board-clean-button" type="button">ğŸ§¹</button>
        </fieldset>
        <hr />
        <div id="click-board-tabview" class="tabview">
            <div id="click-board-tabview-tab-list" class="tabview-tab-list selection">
                <template id="click-board-tabview-tab-template">
                    <label class="item">
                        <input data-role="input" type="radio" name="tab-switch" value="Template">
                        <div data-role="label" class="text">Template</div>
                    </label>
                </template>
            </div>
            <div id="click-board-tabview-panel-container" class="tabview-tab-panel-container">
                <template id="click-board-tabview-panel-template">
                    <div class="tabview-tab-panel click-board-panel">
                        <template id="click-board-tabview-panel-row-template">
                            <div class="click-board-panel-row">
                                <template id="click-board-tabview-button-template">
                                    <button class="click-board-button" type="button">1.1</button>
                                </template>
                            </div>
                        </template>
                    </div>
                </template>
            </div>
        </div>
    </main>
    <footer>
        <div>
            <div id="theme-selector" class="selection is-icon">
                <label class="item">
                    <input type="radio" name="theme-selector" value="auto" checked>
                    <div class="text">ğŸŒ</div>
                </label>
                <label class="item">
                    <input type="radio" name="theme-selector" value="light">
                    <div class="text">ğŸŒ</div>
                </label>
                <label class="item">
                    <input type="radio" name="theme-selector" value="dark">
                    <div class="text">ğŸŒš</div>
                </label>
            </div>
            <div id="mode-selector" class="selection is-icon">
                <label class="item">
                    <input type="radio" name="mode-selector" value="auto" checked>
                    <div class="text">âš¡</div>
                </label>
                <label class="item">
                    <input type="radio" name="mode-selector" value="manual">
                    <div class="text">ğŸ‘‹</div>
                </label>
            </div>
        </div>
        <p>
            Copyright Â© <a href="https://github.com/undecV" target="_blank" rel="noopener noreferrer">undecV</a>
            Â· <a href="https://github.com/undecV/Clipalette" target="_blank" rel="noopener noreferrer">GitHub</a>
        </p>
    </footer>

    <script>
        class Model {
            buttonMap = buttonMap;
            themes = ["auto", "light", "dark"];
            #theme = "auto";
            modes = ["auto", "manual"];
            #mode = "auto"
            #tabIndex = "0";
            outputTextList = [];
            separator = " ";

            constructor() {
                this.theme = localStorage.getItem("clipalette-theme");
                this.mode = localStorage.getItem("clipalette-mode");
                this.tabIndex = localStorage.getItem("clipalette-tab-index");
            }

            get theme() {
                return this.#theme;
            }

            set theme(value) {
                this.#theme = this.themes.includes(value) ? value : this.themes[0];
                localStorage.setItem("clipalette-theme", this.#theme);
            }

            get mode() {
                return this.#mode;
            }

            set mode(value) {
                this.#mode = this.modes.includes(value) ? value : this.modes[0];
                localStorage.setItem("clipalette-mode", this.#mode);
            }

            get tabIndex() {
                return this.#tabIndex;
            }

            set tabIndex(value) {
                const indices = Object.keys(buttonMap).map((_, i) => i);
                const index = typeof value === "number" ? value : parseInt(value, 10);
                this.#tabIndex = indices.includes(index) ? index : indices[0];
                localStorage.setItem("clipalette-tab-index", this.#tabIndex);
            }

            get outputText() {
                return this.outputTextList.join(this.separator);
            }
        }

        class View {

            switchTheme(theme) {
                document.documentElement.setAttribute("data-theme", theme);
                document.querySelector(`input[name="theme-selector"][value="${theme}"]`).checked = true;
            }

            onThemeChange(callback) {
                const themeSelector = document.getElementById("theme-selector");
                themeSelector.addEventListener("change", (event) => {
                    callback(event.target.value);
                });
            }

            onClickBoardCopyButtonClick(callback) {
                const copyButton = document.getElementById("click-board-copy-button");
                copyButton.addEventListener("click", (event) => {
                    callback(event);
                });
            }

            onClickBoardCleanButtonClick(callback) {
                const cleanButton = document.getElementById("click-board-clean-button");
                cleanButton.addEventListener("click", (event) => {
                    callback(event);
                });
            }

            renderButtonMap(buttonMap, currentTabIndex = "0") {
                const tabview = document.getElementById("click-board-tabview");
                const tabList = document.getElementById("click-board-tabview-tab-list");
                const tabTemplate = document.getElementById("click-board-tabview-tab-template");

                const tabPanelContainer = document.getElementById("click-board-tabview-panel-container");
                const tabPanelTemplate = document.getElementById("click-board-tabview-panel-template");
                const tabPanelRowTemplate = tabPanelTemplate.content.getElementById("click-board-tabview-panel-row-template");
                const tabPanelButtonTemplate = tabPanelRowTemplate.content.getElementById("click-board-tabview-button-template");

                Object.entries(buttonMap).forEach(([tabName, tabRows], tabIndex) => {
                    const tab = tabTemplate.content.firstElementChild.cloneNode(true);
                    tab.dataset.index = tabIndex.toString();
                    const input = tab.querySelector('[data-role="input"]');
                    const label = tab.querySelector('[data-role="label"]');

                    input.checked = (tabIndex == currentTabIndex);
                    input.value = tabIndex.toString();
                    input.dataset.index = tabIndex.toString();
                    label.textContent = tabName;
                    tabList.appendChild(tab);

                    const tabPanel = tabPanelTemplate.content.firstElementChild.cloneNode(true);
                    tabPanel.dataset.index = tabIndex.toString();

                    tabRows.forEach((tabRow, tabRowIndex) => {

                        const tabPanelRow = tabPanelRowTemplate.content.firstElementChild.cloneNode(true);
                        tabRow.forEach((button, buttonIndex) => {
                            const buttonElement = tabPanelButtonTemplate.content.firstElementChild.cloneNode(true);
                            buttonElement.dataset.index = buttonIndex.toString();
                            buttonElement.textContent = button;
                            tabPanelRow.appendChild(buttonElement);
                        });
                        tabPanel.appendChild(tabPanelRow);
                    });
                    tabPanel.classList.toggle("is-hidden", tabIndex != currentTabIndex);
                    tabPanelContainer.appendChild(tabPanel);
                });
            }

            switchTab(index) {
                document.querySelector(`input[name="tab-switch"][value="${index}"]`).checked = true;
                document.querySelectorAll(".click-board-panel").forEach((element, i) => {
                    element.classList.toggle("is-hidden", element.dataset.index != index);
                });
            }

            onTabChange(callback) {
                const tabSwitch = document.getElementById("click-board-tabview-tab-list");
                tabSwitch.addEventListener("change", (event) => {
                    callback(event.target.value);
                });
            }

            onTextButtonClick(callback) {
                const buttons = document.querySelectorAll(".click-board-button");
                buttons.forEach(button => {
                    button.addEventListener("click", (event) => {
                        const text = event.target.textContent;
                        callback(text);
                    });
                });
            }

            renderCopiedText(text) {
                const clickBoardOutput = document.getElementById("click-board-output");
                clickBoardOutput.value = text;
            }

            switchMode(mode) {
                document.documentElement.setAttribute("data-mode", mode);
                document.querySelector(`input[name="mode-selector"][value="${mode}"]`).checked = true;
                const copyButton = document.getElementById("click-board-copy-button");
                const cleanButton = document.getElementById("click-board-clean-button");

                switch (mode) {
                    case "auto":
                        copyButton.classList.toggle("is-hidden", true);
                        cleanButton.classList.toggle("is-hidden", true);
                        break;
                    case "manual":
                        copyButton.classList.toggle("is-hidden", false);
                        cleanButton.classList.toggle("is-hidden", false);
                        break;
                    default:
                        console.error("Unknown mode:", mode);
                        break;
                }
            }

            onModeChange(callback) {
                const modeSelector = document.getElementById("mode-selector");
                modeSelector.addEventListener("change", (event) => {
                    callback(event.target.value);
                });
            }
        }

        class Controller {
            constructor(model = new Model(), view = new View()) {
                this.model = model;
                this.view = view;
            }

            init() {
                this.view.switchTheme(this.model.theme);
                this.view.switchMode(this.model.mode);
                this.view.renderButtonMap(this.model.buttonMap);
                this.view.switchTab(this.model.tabIndex);
                this.view.renderCopiedText(this.model.outputText);
                this.view.onThemeChange((theme) => this.handleThemeChange(theme));
                this.view.onModeChange((mode) => this.handleModeChange(mode));
                this.view.onTabChange((index) => this.handleTabChange(index));
                this.view.onTextButtonClick((text) => this.handleTextButtonClick(text));
                this.view.onClickBoardCopyButtonClick((event) => this.handleClickBoardCopyButtonClick(event));
                this.view.onClickBoardCleanButtonClick((event) => this.handleClickBoardCleanButtonClick(event));
            }

            handleThemeChange(theme) {
                this.model.theme = theme;
                this.view.switchTheme(this.model.theme);
            }

            handleTabChange(index) {
                this.model.tabIndex = index;
                this.view.switchTab(this.model.tabIndex);
            }

            handleModeChange(mode) {
                this.model.mode = mode;
                this.view.switchMode(this.model.mode);
            }

            handleClickBoardCopyButtonClick(event) {
                const clickBoardOutput = document.getElementById("click-board-output");
                const text = clickBoardOutput.value;
                this.copyText(text);
            }

            handleClickBoardCleanButtonClick(event) {
                this.model.outputTextList = [];
                this.view.renderCopiedText(this.model.outputText);
            }

            handleTextButtonClick(text) {
                switch (this.model.mode) {
                    case "auto":
                        this.model.outputTextList = [text];
                        break;
                    case "manual":
                        this.model.outputTextList.push(text);
                        break;
                    default:
                        console.error("Unknown mode:", this.model.mode);
                        break;
                }
                this.view.renderCopiedText(this.model.outputText);
                const status = {
                    mode: this.model.mode,
                    outputTextList: this.model.outputTextList,
                    outputText: this.model.outputText,
                }
                console.debug(JSON.stringify(status));
                this.copyText(this.model.outputText);
            }

            copyText(text) {
                navigator.clipboard.writeText(text).catch(() => { });
                console.debug(`Copied: ${text}`);
            }

        }

        const control = new Controller();
        control.init();

    </script>
</body>

</html>